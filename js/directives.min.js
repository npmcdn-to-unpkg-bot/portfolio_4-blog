myApp.directive("checkActiveLink",["$location","$rootScope",function(t){return{restrict:"A",link:function(e,n,o){e.$watch(function(){t.url()==n.find("a").attr("ng-href")||""!=o.checkActiveLink&&-1!=t.url().indexOf(o.checkActiveLink)?n.addClass("active"):n.removeClass("active")})}}}]),myApp.directive("resize",["$window","$rootScope",function(t){return{link:function(e){angular.element(t).bind("scroll",function(){e.scrollLeft=$(window).scrollLeft(),e.scrollLeft>50&&(e.menu=!1,e.scrollLeft="true"),e.$apply()})}}}]),myApp.directive("slider",["$window",function(t){return{restrict:"A",link:function(e,n,o){var i=n.find(".img");e.sliderMatch=e.$eval(o.slider),n.find(".ANY").find("[left]").bind("click",function(){0==e.sliderMatch?e.sliderMatch=i.length-1:e.sliderMatch--,e.$apply()}),n.find(".ANY").find("[right]").bind("click",function(){e.sliderMatch==i.length-1?e.sliderMatch=0:e.sliderMatch++,e.$apply()});var a=function(){$(n).css("height",i.eq(e.sliderMatch).css("height")),void 0!=i.eq(e.sliderMatch).offset()&&i.eq(0).css("margin-top",-(i.eq(e.sliderMatch).offset().top-i.eq(0).offset().top)+"px")};e.$watch("sliderMatch",a),e.sliderUpdate=function(){i=n.find(".img"),1==i.length?n.find(".ANY").hide():n.find(".ANY").show(),a()},angular.element(t).bind("resize",a)}}}]),myApp.directive("dinaPortfolio",["$window","ngNotify","$timeout","$compile","$rootScope",function(t,e,n){return{template:function(){0==$(".full-img").length&&$("body").append("<div class='full-img window' style='display: none'><div class='close-after'></div><div class='relative'><div class='close'></div><img src></div></div>")},link:function(o,i){var r=i.find(".absolute .img").eq(0),s={abs:function(){return parseInt(i.find(".absolute .img").length*(i.find(".absolute .img").width()+18.5)-i.width())},active:function(t,e){return t?Math.abs(parseInt(r.css("margin-left"))-e):parseInt(r.css("margin-left"))-e}},c=function(e){$(e).css({width:i.width()/($(t).width()>1024?4:2)-18.5}),0==Modernizr.testAllProps("height","1vw")&&i.css({height:.4*i.width()})};i.find("[left]").bind("click",function(){var e=s.abs(),n=s.active(!0,300);n>=e?n-300!=e?r.css("margin-left",-e):r.css("margin-left","7px"):r.css("margin-left",s.active(!1,300))}),i.find("[right]").bind("click",function(){var e=s.abs(),n=s.active(!1,-300);n>=7?n-300!=7?r.css("margin-left","7px"):r.css("margin-left",-e+"px"):r.css("margin-left",n)}),i.find(".img").bind("click",function(){$(".full-img img").attr("src",$(this).attr("src")).off("load error").on("load",function(){var t=$(this).parents(".full-img");t.show(!0),n(function(){t.css("opacity",1)},100)}).on("error",function(){return e.set("Ошибка! Загрузить не удалось.",{type:"error",position:"top"})})}).bind("load",function(){c(this)}),$(".full-img.window .close, .full-img.window .close-after").off("click").bind("click",function(){var t=$(this).parents(".full-img");t.css("opacity",0),n(function(){t.hide(!0)},500)}),angular.element(t).bind("resize",function(){var t=s.abs();c(i.find(".absolute .img")),s.active(!0,0)>t&&r.css("margin-left",-t+"px")})}}}]),myApp.directive("taInsertVideo",["$window",function(t){return{restrict:"AE",link:function(e,n,o){var i=function(){var t=n.parent().find("iframe");t.eq(t.length-1).css({width:n.width(),height:n.height()})};n.parent().append('<iframe src="'+o.taInsertVideo+'" frameborder="0" allowfullscreen></iframe>'),angular.element(t).bind("resize",i),n.bind("load",function(){i()})}}}]),myApp.directive("inputTags",["$rootScope","$compile","$timeout","$window",function(t,e,n,o){var i=function(t,e,n,o){this.element=$(t),this.elAdd=$(t).find(".add"),this.scope=e,this.model=n,this.tags=new Array,this.set(o)};return i.prototype.set=function(t){if(void 0!=t)if(Array.isArray(t)){{new Object}for(var o in t)this.tags.push(t[o]),this.add(this.tags.length-1,t[o])}else this.add(this.tags.length,t),this.tags.push(t)},i.prototype.add=function(t,e){var n='<div tag class="tag" tag-id="'+t+'"><div class="close" tag-close></div><div contenteditable="true" class="name" tag-name>'+e+"</div></div>";this.elAdd.eq(0).before(n),this.elAdd.text("")},i.prototype.deleteEl=function(t){this.element.find(".tag").eq(t).remove(),this.tags.splice(t,1);for(var e in this.tags)this.element.find(".tag").eq(e).attr("tag-id",e)},{restrict:"AE",template:function(t,e){var n=e.inputTags;return'<div class="add placeholder-add" contenteditable="true" tag-add></div><input style="display:none" disabled="false" name="'+n+'" ng-model="'+n+'">'},controller:function(t,e,o){t.inputTags=new i(e,t,o.inputTags,t.$eval(o.inputTagsAdd)),e.bind("keydown",function(e){13==e.keyCode&&-1!=t.inputTags.elAdd.text().search(/([\S])/)&&(t.inputTags.set(t.inputTags.elAdd.text()),t[o.inputTags]=t.inputTags.tags),n(function(){""!=t.inputTags.elAdd.text()?t.inputTags.elAdd.removeClass("placeholder-add"):t.inputTags.elAdd.addClass("placeholder-add")})}),e.bind("drop dragover",function(t){t.preventDefault()})},link:function(t,e,i){var a=new Object,r=function(e){var r=e.srcElement||e.target,c=function(){$(r).hasClass("name")&&(t.inputTags.tags[$(r).parents(".tag").eq(0).attr("tag-id")]=$(r).text()),t[i.inputTags]=t.inputTags.tags};13==e.keyCode&&e.preventDefault(),"keyup"==e.type?delete a[e.keyCode]:a[e.keyCode]=!0,(a[86]&&a[17]||"paste"==e.type)&&n(function(){var t=document.createRange(),e=o.getSelection(),n=o.getSelection().getRangeAt(0).endOffset;$(r).text($(r).text()),t.setStart(r.childNodes[0],n),t.collapse(!0),e.removeAllRanges(),e.addRange(t),r.focus(),c()}),n(c)};t.inputTags.elAdd.on("keyup paste keydown",r),t.$watch(function(){t.inputTags.element.find(".tag").off("keyup paste keydown").on("keyup keydown paste",r),t.inputTags.element.find(".tag .name, .tag .close").off("blur click").on("blur click",function(e){var o=$(this);(-1==o.text().search(/([\S])/)&&"blur"==e.type||o.hasClass("close"))&&(o.parent(".tag").eq(0).addClass("remove-tag"),n(function(){t.inputTags.deleteEl(o.parent().attr("tag-id")),t[i.inputTags]=t.inputTags.tags},300))})})}}}]),myApp.directive("ngBindHtmlDirective",["$compile","$rootScope",function(t){return function(e,n,o){e.$watch(o.ngBindHtmlDirective,function(){n.html(e.$eval(o.ngBindHtmlDirective)),t(n.contents())(e)})}}]),myApp.directive("ngOnload",function(){return function(t,e,n){e.bind("load",function(){t.$eval(n.ngOnload)})}});