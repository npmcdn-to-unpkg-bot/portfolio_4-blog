define(["./core","./var/document","./var/rnotwhite","./var/slice","./data/var/dataPriv","./core/init","./selector"],function(e,t,n,i,r){function l(){return!0}function u(){return!1}function c(){try{return t.activeElement}catch(e){}}function f(t,n,i,r,s,o){var a,l;if("object"==typeof n){"string"!=typeof i&&(r=r||i,i=void 0);for(l in n)f(t,l,i,r,n[l],o);return t}if(null==r&&null==s?(s=i,r=i=void 0):null==s&&("string"==typeof i?(s=r,r=void 0):(s=r,r=i,i=void 0)),s===!1)s=u;else if(!s)return this;return 1===o&&(a=s,s=function(t){return e().off(t),a.apply(this,arguments)},s.guid=a.guid||(a.guid=e.guid++)),t.each(function(){e.event.add(this,n,s,r,i)})}var s=/^key/,o=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,a=/^([^.]*)(?:\.(.+)|)/;return e.event={global:{},add:function(t,i,s,o,l){var u,c,f,d,p,h,m,g,v,y,b,w=r.get(t);if(w)for(s.handler&&(u=s,s=u.handler,l=u.selector),s.guid||(s.guid=e.guid++),(d=w.events)||(d=w.events={}),(c=w.handle)||(c=w.handle=function(n){return"undefined"!=typeof e&&e.event.triggered!==n.type?e.event.dispatch.apply(t,arguments):void 0}),i=(i||"").match(n)||[""],p=i.length;p--;)f=a.exec(i[p])||[],v=b=f[1],y=(f[2]||"").split(".").sort(),v&&(m=e.event.special[v]||{},v=(l?m.delegateType:m.bindType)||v,m=e.event.special[v]||{},h=e.extend({type:v,origType:b,data:o,handler:s,guid:s.guid,selector:l,needsContext:l&&e.expr.match.needsContext.test(l),namespace:y.join(".")},u),(g=d[v])||(g=d[v]=[],g.delegateCount=0,m.setup&&m.setup.call(t,o,y,c)!==!1||t.addEventListener&&t.addEventListener(v,c)),m.add&&(m.add.call(t,h),h.handler.guid||(h.handler.guid=s.guid)),l?g.splice(g.delegateCount++,0,h):g.push(h),e.event.global[v]=!0)},remove:function(t,i,s,o,l){var u,c,f,d,p,h,m,g,v,y,b,w=r.hasData(t)&&r.get(t);if(w&&(d=w.events)){for(i=(i||"").match(n)||[""],p=i.length;p--;)if(f=a.exec(i[p])||[],v=b=f[1],y=(f[2]||"").split(".").sort(),v){for(m=e.event.special[v]||{},v=(o?m.delegateType:m.bindType)||v,g=d[v]||[],f=f[2]&&new RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"),c=u=g.length;u--;)h=g[u],!l&&b!==h.origType||s&&s.guid!==h.guid||f&&!f.test(h.namespace)||o&&o!==h.selector&&("**"!==o||!h.selector)||(g.splice(u,1),h.selector&&g.delegateCount--,m.remove&&m.remove.call(t,h));c&&!g.length&&(m.teardown&&m.teardown.call(t,y,w.handle)!==!1||e.removeEvent(t,v,w.handle),delete d[v])}else for(v in d)e.event.remove(t,v+i[p],s,o,!0);e.isEmptyObject(d)&&r.remove(t,"handle events")}},dispatch:function(t){t=e.event.fix(t);var n,s,o,a,l,u=[],c=i.call(arguments),f=(r.get(this,"events")||{})[t.type]||[],d=e.event.special[t.type]||{};if(c[0]=t,t.delegateTarget=this,!d.preDispatch||d.preDispatch.call(this,t)!==!1){for(u=e.event.handlers.call(this,t,f),n=0;(a=u[n++])&&!t.isPropagationStopped();)for(t.currentTarget=a.elem,s=0;(l=a.handlers[s++])&&!t.isImmediatePropagationStopped();)(!t.rnamespace||t.rnamespace.test(l.namespace))&&(t.handleObj=l,t.data=l.data,o=((e.event.special[l.origType]||{}).handle||l.handler).apply(a.elem,c),void 0!==o&&(t.result=o)===!1&&(t.preventDefault(),t.stopPropagation()));return d.postDispatch&&d.postDispatch.call(this,t),t.result}},handlers:function(t,n){var i,r,s,o,a=[],l=n.delegateCount,u=t.target;if(l&&u.nodeType&&("click"!==t.type||isNaN(t.button)||t.button<1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&(u.disabled!==!0||"click"!==t.type)){for(r=[],i=0;l>i;i++)o=n[i],s=o.selector+" ",void 0===r[s]&&(r[s]=o.needsContext?e(s,this).index(u)>-1:e.find(s,this,null,[u]).length),r[s]&&r.push(o);r.length&&a.push({elem:u,handlers:r})}return l<n.length&&a.push({elem:this,handlers:n.slice(l)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var i,r,s,o=n.button;return null==e.pageX&&null!=n.clientX&&(i=e.target.ownerDocument||t,r=i.documentElement,s=i.body,e.pageX=n.clientX+(r&&r.scrollLeft||s&&s.scrollLeft||0)-(r&&r.clientLeft||s&&s.clientLeft||0),e.pageY=n.clientY+(r&&r.scrollTop||s&&s.scrollTop||0)-(r&&r.clientTop||s&&s.clientTop||0)),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(n){if(n[e.expando])return n;var i,r,a,l=n.type,u=n,c=this.fixHooks[l];for(c||(this.fixHooks[l]=c=o.test(l)?this.mouseHooks:s.test(l)?this.keyHooks:{}),a=c.props?this.props.concat(c.props):this.props,n=new e.Event(u),i=a.length;i--;)r=a[i],n[r]=u[r];return n.target||(n.target=t),3===n.target.nodeType&&(n.target=n.target.parentNode),c.filter?c.filter(n,u):n},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==c()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===c()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&e.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(t){return e.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},e.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},e.Event=function(t,n){return this instanceof e.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?l:u):this.type=t,n&&e.extend(this,n),this.timeStamp=t&&t.timeStamp||e.now(),void(this[e.expando]=!0)):new e.Event(t,n)},e.Event.prototype={constructor:e.Event,isDefaultPrevented:u,isPropagationStopped:u,isImmediatePropagationStopped:u,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=l,e&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=l,e&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=l,e&&e.stopImmediatePropagation(),this.stopPropagation()}},e.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,n){e.event.special[t]={delegateType:n,bindType:n,handle:function(t){var i,r=this,s=t.relatedTarget,o=t.handleObj;return(!s||s!==r&&!e.contains(r,s))&&(t.type=o.origType,i=o.handler.apply(this,arguments),t.type=n),i}}}),e.fn.extend({on:function(e,t,n,i){return f(this,e,t,n,i)},one:function(e,t,n,i){return f(this,e,t,n,i,1)},off:function(t,n,i){var r,s;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,e(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(s in t)this.off(s,n,t[s]);return this}return(n===!1||"function"==typeof n)&&(i=n,n=void 0),i===!1&&(i=u),this.each(function(){e.event.remove(this,t,i,n)})}}),e});