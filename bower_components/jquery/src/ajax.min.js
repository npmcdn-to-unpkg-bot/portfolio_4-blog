define(["./core","./var/document","./var/rnotwhite","./ajax/var/location","./ajax/var/nonce","./ajax/var/rquery","./core/init","./ajax/parseJSON","./ajax/parseXML","./event/trigger","./deferred"],function(t,e,n,r,i,s){function g(e){return function(r,i){"string"!=typeof r&&(i=r,r="*");var s,o=0,a=r.toLowerCase().match(n)||[];if(t.isFunction(i))for(;s=a[o++];)"+"===s[0]?(s=s.slice(1)||"*",(e[s]=e[s]||[]).unshift(i)):(e[s]=e[s]||[]).push(i)}}function v(e,n,r,i){function a(l){var c;return s[l]=!0,t.each(e[l]||[],function(t,e){var l=e(n,r,i);return"string"!=typeof l||o||s[l]?o?!(c=l):void 0:(n.dataTypes.unshift(l),a(l),!1)}),c}var s={},o=e===p;return a(n.dataTypes[0])||!s["*"]&&a("*")}function y(e,n){var r,i,s=t.ajaxSettings.flatOptions||{};for(r in n)void 0!==n[r]&&((s[r]?e:i||(i={}))[r]=n[r]);return i&&t.extend(!0,e,i),e}function $(t,e,n){for(var r,i,s,o,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(i in a)if(a[i]&&a[i].test(r)){l.unshift(i);break}if(l[0]in n)s=l[0];else{for(i in n){if(!l[0]||t.converters[i+" "+l[0]]){s=i;break}o||(o=i)}s=s||o}return s?(s!==l[0]&&l.unshift(s),n[s]):void 0}function b(t,e,n,r){var i,s,o,a,l,c={},u=t.dataTypes.slice();if(u[1])for(o in t.converters)c[o.toLowerCase()]=t.converters[o];for(s=u.shift();s;)if(t.responseFields[s]&&(n[t.responseFields[s]]=e),!l&&r&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=s,s=u.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(o=c[l+" "+s]||c["* "+s],!o)for(i in c)if(a=i.split(" "),a[1]===s&&(o=c[l+" "+a[0]]||c["* "+a[0]])){o===!0?o=c[i]:c[i]!==!0&&(s=a[0],u.unshift(a[1]));break}if(o!==!0)if(o&&t["throws"])e=o(e);else try{e=o(e)}catch(f){return{state:"parsererror",error:o?f:"No conversion from "+l+" to "+s}}}return{state:"success",data:e}}var o=/#.*$/,a=/([?&])_=[^&]*/,l=/^(.*?):[ \t]*([^\r\n]*)$/gm,c=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,u=/^(?:GET|HEAD)$/,f=/^\/\//,d={},p={},h="*/".concat("*"),m=e.createElement("a");return m.href=r.href,t.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:r.href,type:"GET",isLocal:c.test(r.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":h,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":t.parseJSON,"text xml":t.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,n){return n?y(y(e,t.ajaxSettings),n):y(t.ajaxSettings,e)},ajaxPrefilter:g(d),ajaxTransport:g(p),ajax:function(c,g){function U(e,n,r,i){var s,o,a,l,c,u=n;2!==q&&(q=2,S&&window.clearTimeout(S),y=void 0,k=i||"",R.readyState=e>0?4:0,s=e>=200&&300>e||304===e,r&&(l=$(C,R,r)),l=b(C,l,R,s),s?(C.ifModified&&(c=R.getResponseHeader("Last-Modified"),c&&(t.lastModified[w]=c),c=R.getResponseHeader("etag"),c&&(t.etag[w]=c)),204===e||"HEAD"===C.type?u="nocontent":304===e?u="notmodified":(u=l.state,o=l.data,a=l.error,s=!a)):(a=u,(e||!u)&&(u="error",0>e&&(e=0))),R.status=e,R.statusText=(n||u)+"",s?O.resolveWith(A,[o,u,R]):O.rejectWith(A,[R,u,a]),R.statusCode(D),D=void 0,E&&I.trigger(s?"ajaxSuccess":"ajaxError",[R,C,s?o:a]),N.fireWith(A,[R,u]),E&&(I.trigger("ajaxComplete",[R,C]),--t.active||t.event.trigger("ajaxStop")))}"object"==typeof c&&(g=c,c=void 0),g=g||{};var y,w,k,j,S,x,E,T,C=t.ajaxSetup({},g),A=C.context||C,I=C.context&&(A.nodeType||A.jquery)?t(A):t.event,O=t.Deferred(),N=t.Callbacks("once memory"),D=C.statusCode||{},_={},P={},q=0,L="canceled",R={readyState:0,getResponseHeader:function(t){var e;if(2===q){if(!j)for(j={};e=l.exec(k);)j[e[1].toLowerCase()]=e[2];e=j[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===q?k:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return q||(t=P[n]=P[n]||t,_[t]=e),this},overrideMimeType:function(t){return q||(C.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>q)for(e in t)D[e]=[D[e],t[e]];else R.always(t[R.status]);return this},abort:function(t){var e=t||L;return y&&y.abort(e),U(0,e),this}};if(O.promise(R).complete=N.add,R.success=R.done,R.error=R.fail,C.url=((c||C.url||r.href)+"").replace(o,"").replace(f,r.protocol+"//"),C.type=g.method||g.type||C.method||C.type,C.dataTypes=t.trim(C.dataType||"*").toLowerCase().match(n)||[""],null==C.crossDomain){x=e.createElement("a");try{x.href=C.url,x.href=x.href,C.crossDomain=m.protocol+"//"+m.host!=x.protocol+"//"+x.host}catch(M){C.crossDomain=!0}}if(C.data&&C.processData&&"string"!=typeof C.data&&(C.data=t.param(C.data,C.traditional)),v(d,C,g,R),2===q)return R;E=t.event&&C.global,E&&0===t.active++&&t.event.trigger("ajaxStart"),C.type=C.type.toUpperCase(),C.hasContent=!u.test(C.type),w=C.url,C.hasContent||(C.data&&(w=C.url+=(s.test(w)?"&":"?")+C.data,delete C.data),C.cache===!1&&(C.url=a.test(w)?w.replace(a,"$1_="+i++):w+(s.test(w)?"&":"?")+"_="+i++)),C.ifModified&&(t.lastModified[w]&&R.setRequestHeader("If-Modified-Since",t.lastModified[w]),t.etag[w]&&R.setRequestHeader("If-None-Match",t.etag[w])),(C.data&&C.hasContent&&C.contentType!==!1||g.contentType)&&R.setRequestHeader("Content-Type",C.contentType),R.setRequestHeader("Accept",C.dataTypes[0]&&C.accepts[C.dataTypes[0]]?C.accepts[C.dataTypes[0]]+("*"!==C.dataTypes[0]?", "+h+"; q=0.01":""):C.accepts["*"]);for(T in C.headers)R.setRequestHeader(T,C.headers[T]);if(C.beforeSend&&(C.beforeSend.call(A,R,C)===!1||2===q))return R.abort();L="abort";for(T in{success:1,error:1,complete:1})R[T](C[T]);if(y=v(p,C,g,R)){if(R.readyState=1,E&&I.trigger("ajaxSend",[R,C]),2===q)return R;C.async&&C.timeout>0&&(S=window.setTimeout(function(){R.abort("timeout")},C.timeout));try{q=1,y.send(_,U)}catch(M){if(!(2>q))throw M;U(-1,M)}}else U(-1,"No Transport");return R},getJSON:function(e,n,r){return t.get(e,n,r,"json")},getScript:function(e,n){return t.get(e,void 0,n,"script")}}),t.each(["get","post"],function(e,n){t[n]=function(e,r,i,s){return t.isFunction(r)&&(s=s||i,i=r,r=void 0),t.ajax(t.extend({url:e,type:n,dataType:s,data:r,success:i},t.isPlainObject(e)&&e))}}),t});