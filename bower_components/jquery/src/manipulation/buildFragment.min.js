define(["../core","./var/rtagName","./var/rscriptType","./wrapMap","./getAll","./setGlobalEval"],function(e,t,n,r,i,o){function a(a,u,l,f,c){for(var d,p,h,v,m,g,y=u.createDocumentFragment(),$=[],b=0,w=a.length;w>b;b++)if(d=a[b],d||0===d)if("object"===e.type(d))e.merge($,d.nodeType?[d]:d);else if(s.test(d)){for(p=p||y.appendChild(u.createElement("div")),h=(t.exec(d)||["",""])[1].toLowerCase(),v=r[h]||r._default,p.innerHTML=v[1]+e.htmlPrefilter(d)+v[2],g=v[0];g--;)p=p.lastChild;e.merge($,p.childNodes),p=y.firstChild,p.textContent=""}else $.push(u.createTextNode(d));for(y.textContent="",b=0;d=$[b++];)if(f&&e.inArray(d,f)>-1)c&&c.push(d);else if(m=e.contains(d.ownerDocument,d),p=i(y.appendChild(d),"script"),m&&o(p),l)for(g=0;d=p[g++];)n.test(d.type||"")&&l.push(d);return y}var s=/<|&#?\w+;/;return a});