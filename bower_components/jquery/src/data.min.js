define(["./core","./core/access","./data/var/dataPriv","./data/var/dataUser"],function(e,t,n,i){function o(t,n,o){var a;if(void 0===o&&1===t.nodeType)if(a="data-"+n.replace(s,"-$&").toLowerCase(),o=t.getAttribute(a),"string"==typeof o){try{o="true"===o?!0:"false"===o?!1:"null"===o?null:+o+""===o?+o:r.test(o)?e.parseJSON(o):o}catch(l){}i.set(t,n,o)}else o=void 0;return o}var r=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,s=/[A-Z]/g;return e.extend({hasData:function(e){return i.hasData(e)||n.hasData(e)},data:function(e,t,n){return i.access(e,t,n)},removeData:function(e,t){i.remove(e,t)},_data:function(e,t,i){return n.access(e,t,i)},_removeData:function(e,t){n.remove(e,t)}}),e.fn.extend({data:function(r,a){var l,u,c,f=this[0],d=f&&f.attributes;if(void 0===r){if(this.length&&(c=i.get(f),1===f.nodeType&&!n.get(f,"hasDataAttrs"))){for(l=d.length;l--;)d[l]&&(u=d[l].name,0===u.indexOf("data-")&&(u=e.camelCase(u.slice(5)),o(f,u,c[u])));n.set(f,"hasDataAttrs",!0)}return c}return"object"==typeof r?this.each(function(){i.set(this,r)}):t(this,function(t){var n,a;if(f&&void 0===t){if(n=i.get(f,r)||i.get(f,r.replace(s,"-$&").toLowerCase()),void 0!==n)return n;if(a=e.camelCase(r),n=i.get(f,a),void 0!==n)return n;if(n=o(f,a,void 0),void 0!==n)return n}else a=e.camelCase(r),this.each(function(){var e=i.get(this,a);i.set(this,a,t),r.indexOf("-")>-1&&void 0!==e&&i.set(this,r,t)})},null,a,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){i.remove(this,e)})}}),e});